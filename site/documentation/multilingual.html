<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Jun 28, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130628" />
    <meta http-equiv="Content-Language" content="en" />
    <title>CLAVIN Documentation - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>CLAVIN</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://beri.co" class="externalLink" title="Berico Technologies">
        Berico Technologies</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="http://github.com/Berico-Technologies/CLAVIN" class="externalLink" title="CLAVIN @ GitHub">
        CLAVIN @ GitHub</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2013-06-28</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 0.4.0</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                            
      <li>
    
                          <a href="../index.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                  
      <li>
    
                          <a href="../roadmap.html" title="Roadmap">
          <i class="none"></i>
        Roadmap</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                                
      <li>
    
                          <a href="../tutorials/installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../tutorials/fivemin-tutorial.html" title="5-Minute Tutorial">
          <i class="none"></i>
        5-Minute Tutorial</a>
            </li>
                              <li class="nav-header">Changelog</li>
                                
      <li>
    
                          <a href="../changelog/changes-v0.4.0.html" title="v0.4.0">
          <i class="none"></i>
        v0.4.0</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                                                                              
      <li>
    
                          <a href="javascript:void(0)" title="How CLAVIN Works">
          <i class="icon-chevron-down"></i>
        How CLAVIN Works</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../documentation/model.html" title="CLAVIN's Model">
          <i class="none"></i>
        CLAVIN's Model</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/workflow-tutorial.html" title="Processing Workflow">
          <i class="none"></i>
        Processing Workflow</a>
            </li>
              </ul>
        </li>
                                                                                
      <li>
    
                          <a href="javascript:void(0)" title="Building a Gazetteer Index">
          <i class="icon-chevron-down"></i>
        Building a Gazetteer Index</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../documentation/geonames-indexing.html" title="From Geonames">
          <i class="none"></i>
        From Geonames</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/custom-indexing.html" title="From Custom Source">
          <i class="none"></i>
        From Custom Source</a>
            </li>
              </ul>
        </li>
                                                                                                            
      <li>
    
                          <a href="javascript:void(0)" title="Advanced Topics">
          <i class="icon-chevron-down"></i>
        Advanced Topics</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../documentation/coordinate-parser.html" title="Creating a Coordinate Parser">
          <i class="none"></i>
        Creating a Coordinate Parser</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/custom-weights.html" title="Applying Custom Weights to Resolution">
          <i class="none"></i>
        Applying Custom Weights to Resolution</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Resolving Locations in other Languages</a>
          </li>
              </ul>
        </li>
                              <li class="nav-header">Maven Information</li>
                                                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section"><h2>Resolving Locations in other Languages<a name="Resolving_Locations_in_other_Languages"></a></h2><p>It is possible for CLAVIN to be used for geoparsing documents in other languages without much modification. The only component that really needs to be modified is the LocationExtractor, since it is that component's responsibility for finding unresolved locations in text.</p><p>The Apache OpenNLP NameFinder supports two languages other than English: Dutch and Spanish. In this example, we will use both to demonstrate the process.</p><div class="section"><h3>Step 1 - Download the OpenNLP Language models.<a name="Step_1_-_Download_the_OpenNLP_Language_models."></a></h3><p>Luckily for you, this has already been done. Those models are in the CLAVIN project (<tt>src/main/java/resources</tt>).</p><p>If you want to download them yourself, you can find them on the <a class="externalLink" href="http://opennlp.sourceforge.net/models-1.5/">OpenNLP SourceForge Site</a>.</p></div><div class="section"><h3>Step 2 - Configure OpenNLP to use the new language models.<a name="Step_2_-_Configure_OpenNLP_to_use_the_new_language_models."></a></h3><p>Create an instance of the <tt>ApacheExtractor</tt> and point it to the correct models:</p><div class="section"><div class="section"><h5>For Dutch use the following configuration:<a name="For_Dutch_use_the_following_configuration:"></a></h5>
<div class="source"><pre class="prettyprint linenums">ApacheExtractor locationExtractor = 
  new ApacheExtractor(
    &quot;src/main/resources/nl-ner-location.bin&quot;, 
    &quot;src/main/resources/nl-token.bin&quot;, 
    &quot;src/main/resources/nl-sent.bin&quot;);
</pre></div></div><div class="section"><h5>For Spanish use the following configuration:<a name="For_Spanish_use_the_following_configuration:"></a></h5>
<div class="source"><pre class="prettyprint linenums">ApacheExtractor locationExtractor = 
  new ApacheExtractor(
    &quot;src/main/resources/es-ner-location.bin&quot;, 
    &quot;src/main/resources/en-token.bin&quot;, 
    &quot;src/main/resources/en-sent.bin&quot;);
</pre></div>
<blockquote><p>Note: We are using the English tokenizers for the Spanish corpus since the languages are similar enough and the fact that OpenNLP doesn't actually have the models for the Spanish language.</p>
</blockquote></div></div></div><div class="section"><h3>Step 3 - Override the <tt>DefaultLocationExtractor</tt> of <tt>GeoParserFactory</tt><a name="Step_3_-_Override_the_DefaultLocationExtractor_of_GeoParserFactory"></a></h3><p>Let's make change the default location extractor:</p>
<div class="source"><pre class="prettyprint linenums">GeoParserFactory.DefaultLocationExtractor = locationExtractor;
</pre></div></div><div class="section"><h3>Step 4 - Perform resolution as you normally would<a name="Step_4_-_Perform_resolution_as_you_normally_would"></a></h3><p>Here is an example of the regular workflow (in this example we are parsing a Spanish document):</p>
<div class="source"><pre class="prettyprint linenums">// Get an instance of the GeoParser.
GeoParser geoParser = GeoParserFactory.getDefault(&quot;IndexDirectory/&quot;);

// Read the test article to a String.
String spanishText = TextUtils.fileToString(
    new File(&quot;src/test/resources/sample-docs/SpanishNewsArticle.txt&quot;));

// Parse the article.
ResolutionContext results = geoParser.parse(spanishText);

// Play with the results.
for (LocationOccurrence location : results.getExtractionContext().getLocations()){
  
  System.out.println(location);
}

System.out.println(&quot;----------------------------------------------------------&quot;);

for (ResolvedLocation location : results.getLocations()){
  
  System.out.println(location);
}
</pre></div><p>There is also a Dutch news article available:</p>
<div class="source"><pre class="prettyprint linenums">String dutchText = TextUtils.fileToString(
  new File(&quot;src/test/resources/sample-docs/DutchNewsArticle.txt&quot;));
</pre></div></div><div class="section"><h3>Dutch Results<a name="Dutch_Results"></a></h3>
<div><pre>
21:34:40.636 [main] INFO  com.berico.clavin.GeoParser - Input Size: 2852
21:34:40.829 [main] INFO  com.berico.clavin.GeoParser - Extracted Location Count: 7
21:34:40.840 [main] INFO  com.berico.clavin.GeoParser - Extracted Coordinates Count: 0
21:34:40.841 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Beginning resolution step.
21:34:41.597 [main] INFO  c.b.c.r.i.l.LuceneLocationNameIndex - Found no results for duitsland.
21:34:41.597 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Found 6 location candidate lists.
21:34:41.597 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Found 0 coordinate candidate lists.
21:34:41.598 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Selected 0 coordinates.
21:34:41.602 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Selected 6 locations.
21:34:41.603 [main] INFO  com.berico.clavin.GeoParser - Resolved 6 locations and 0 coordinates.
LocationOccurrence: [Brussel] at position 458.
LocationOccurrence: [Nederland] at position 468.
LocationOccurrence: [Nederland] at position 671.
LocationOccurrence: [Nederland] at position 810.
LocationOccurrence: [Nederland] at position 848.
LocationOccurrence: [Nederland] at position 890.
LocationOccurrence: [Duitsland] at position 1596.
----------------------------------------------------------
Resolved &quot;Brussel&quot; as&quot;Brussel&quot; 
  { Place [name: Brussel, country: ZA, center: -29.3029, 21.24889]}, 
  position: 458, confidence: 0.0, fuzzy: false
Resolved &quot;Nederland&quot; as&quot;Nederland&quot; 
  { Place [name: Nederland, country: US, center: 29.97438, -93.9924]}, 
  position: 468, confidence: 0.0, fuzzy: false
Resolved &quot;Nederland&quot; as&quot;Nederland&quot; 
  { Place [name: Nederland, country: US, center: 29.97438, -93.9924]}, 
  position: 671, confidence: 0.0, fuzzy: false
Resolved &quot;Nederland&quot; as&quot;Nederland&quot; 
  { Place [name: Nederland, country: US, center: 29.97438, -93.9924]}, 
  position: 810, confidence: 0.0, fuzzy: false
Resolved &quot;Nederland&quot; as&quot;Nederland&quot; 
  { Place [name: Nederland, country: US, center: 29.97438, -93.9924]}, 
  position: 848, confidence: 0.0, fuzzy: false
Resolved &quot;Nederland&quot; as&quot;Nederland&quot; 
  { Place [name: Nederland, country: US, center: 29.97438, -93.9924]}, 
  position: 890, confidence: 0.0, fuzzy: false
</pre></div></div><div class="section"><h3>Spanish Results<a name="Spanish_Results"></a></h3>
<div><pre>
21:36:13.577 [main] INFO  com.berico.clavin.GeoParser - Input Size: 3757
21:36:13.808 [main] INFO  com.berico.clavin.GeoParser - Extracted Location Count: 4
21:36:13.824 [main] DEBUG c.b.c.e.c.BaseDdPatternParsingStrategy - From '28.144.000 e', parsed Lat/Lon: 28.14, 4.0.
21:36:13.866 [main] INFO  com.berico.clavin.GeoParser - Extracted Coordinates Count: 1
21:36:13.867 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Beginning resolution step.
21:36:14.434 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Found 4 location candidate lists.
21:36:14.572 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Found 1 coordinate candidate lists.
New Best: 0.10391060131503002, Loc: Resolved: &quot;28.144.000 e&quot; as 19.247314274859388km W of Tisna&#xef;et el Khahna, [DZ]
New Best: 0.1837341597761688, Loc: Resolved: &quot;28.144.000 e&quot; as 10.885292111366052km ESE of &#x2019;A&#xef;n el Morra, [DZ]
New Best: 0.19975483724644835, Loc: Resolved: &quot;28.144.000 e&quot; as 10.012273182313436km SSW of Djebel el Abiod, [DZ]
21:36:14.573 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Selected 1 coordinates.
21:36:14.579 [main] DEBUG c.b.c.r.impl.DefaultLocationResolver - Selected 4 locations.
21:36:14.579 [main] INFO  com.berico.clavin.GeoParser - Resolved 4 locations and 1 coordinates.
LocationOccurrence: [Uruguay] at position 1562.
LocationOccurrence: [Adade] at position 2313.
LocationOccurrence: [Madrid] at position 2550.
LocationOccurrence: [Suiza] at position 2706.
----------------------------------------------------------
Resolved &quot;Uruguay&quot; as&quot;Uruguay&quot; 
  { Place [name: Uruguay, country: CU, center: 21.18333, -77.8]}, 
  position: 1562, confidence: 0.0, fuzzy: false
Resolved &quot;Adade&quot; as&quot;Adade&quot; 
  { Place [name: Adad, country: DZ, center: 23.24072, 5.80027]}, 
  position: 2313, confidence: 0.0, fuzzy: false
Resolved &quot;Madrid&quot; as&quot;Madrid Centro&quot; 
  { Place [name: City Center, country: ES, center: 40.41831, -3.70275]}, 
  position: 2550, confidence: 7.0, fuzzy: false
Resolved &quot;Suiza&quot; as&quot;Suiza&quot; 
  { Place [name: La Suiza, country: CR, center: 9.85238, -83.61331]}, 
  position: 2706, confidence: 0.0, fuzzy: false
</pre></div></div><div class="section"><h3>Summary<a name="Summary"></a></h3><p>We hope you noticed that the results were kind of awful. Please dont use the OpenNLP language models without additional training since a Google Translate of the source documents will demonstrate how many locations were missed by the extractor. CLAVIN didnt do terribly well at resolving some of the Dutch names (i.e. Nederlands), which is an indication that the underlying Gazetteer (GeoNames) needs some additional entries.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2013
                        <a href="http://beri.co">Berico Technologies</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
